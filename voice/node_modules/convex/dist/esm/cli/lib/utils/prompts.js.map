{
  "version": 3,
  "sources": ["../../../../../src/cli/lib/utils/prompts.ts"],
  "sourcesContent": ["import input from \"@inquirer/input\";\nimport select from \"@inquirer/select\";\nimport search from \"@inquirer/search\";\nimport confirm from \"@inquirer/confirm\";\nimport { Context } from \"../../../bundler/context.js\";\nimport { logOutput } from \"../../../bundler/log.js\";\n\n/**\n * Handle ExitPromptError thrown by @inquirer/* packages when the user\n * presses Ctrl+C. Instead of printing an ugly stack trace, exit cleanly.\n * For unexpected errors, use ctx.crash to report to Sentry.\n */\nfunction handlePromptError(ctx: Context) {\n  return async (error: unknown): Promise<never> => {\n    if (error instanceof Error && error.name === \"ExitPromptError\") {\n      // User pressed Ctrl+C \u2014 exit silently with code 130 (standard for SIGINT)\n      // eslint-disable-next-line no-process-exit\n      process.exit(130);\n    }\n    return ctx.crash({\n      exitCode: 1,\n      errorType: \"fatal\",\n      printedMessage: `Unexpected prompt error: ${String(error)}`,\n      errForSentry: error instanceof Error ? error : undefined,\n    });\n  };\n}\n\nexport const promptString = async (\n  ctx: Context,\n  options: {\n    message: string;\n    default?: string;\n  },\n): Promise<string> => {\n  if (process.stdin.isTTY) {\n    return input({\n      message: options.message,\n      ...(options.default !== undefined ? { default: options.default } : {}),\n    }).catch(handlePromptError(ctx));\n  } else {\n    return ctx.crash({\n      exitCode: 1,\n      errorType: \"fatal\",\n      printedMessage: `Cannot prompt for input in non-interactive terminals. (${options.message})`,\n    });\n  }\n};\n\nexport const promptOptions = async <V>(\n  ctx: Context,\n  options: {\n    message: string;\n    choices: Array<{ name: string; value: V }>;\n    default?: V;\n    prefix?: string;\n    suffix?: string;\n  },\n): Promise<V> => {\n  if (process.stdin.isTTY) {\n    return select<V>({\n      message: options.message + (options.suffix ?? \"\"),\n      choices: options.choices,\n      ...(options.default !== undefined ? { default: options.default } : {}),\n      ...(options.prefix !== undefined\n        ? { theme: { prefix: options.prefix } }\n        : {}),\n    }).catch(handlePromptError(ctx));\n  } else {\n    return ctx.crash({\n      exitCode: 1,\n      errorType: \"fatal\",\n      printedMessage: `Cannot prompt for input in non-interactive terminals. (${options.message})`,\n    });\n  }\n};\n\nexport const promptSearch = async <V>(\n  ctx: Context,\n  options: {\n    message: string;\n    choices: Array<{ name: string; value: V }>;\n    default?: V;\n  },\n): Promise<V> => {\n  if (process.stdin.isTTY) {\n    return search<V>({\n      message: options.message,\n      ...(options.default !== undefined ? { default: options.default } : {}),\n      source: (input: string | undefined) => {\n        if (!input) return options.choices;\n        const term = input.toLowerCase();\n        return options.choices.filter((c) =>\n          c.name.toLowerCase().includes(term),\n        );\n      },\n    }).catch(handlePromptError(ctx));\n  } else {\n    return ctx.crash({\n      exitCode: 1,\n      errorType: \"fatal\",\n      printedMessage: `Cannot prompt for input in non-interactive terminals. (${options.message})`,\n    });\n  }\n};\n\nexport const promptYesNo = async (\n  ctx: Context,\n  options: {\n    message: string;\n    default?: boolean;\n    prefix?: string;\n    nonInteractiveError?: string;\n  },\n): Promise<boolean> => {\n  if (process.stdin.isTTY) {\n    return confirm({\n      message: options.message,\n      ...(options.default !== undefined ? { default: options.default } : {}),\n      ...(options.prefix !== undefined\n        ? { theme: { prefix: options.prefix } }\n        : {}),\n    }).catch(handlePromptError(ctx));\n  } else {\n    logOutput(options.message);\n    return ctx.crash({\n      exitCode: 1,\n      errorType: \"fatal\",\n      printedMessage:\n        options.nonInteractiveError ??\n        `Cannot prompt for input in non-interactive terminals. (${options.message})`,\n    });\n  }\n};\n"],
  "mappings": ";AAAA,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,YAAY;AACnB,OAAO,aAAa;AAEpB,SAAS,iBAAiB;AAO1B,SAAS,kBAAkB,KAAc;AACvC,SAAO,OAAO,UAAmC;AAC/C,QAAI,iBAAiB,SAAS,MAAM,SAAS,mBAAmB;AAG9D,cAAQ,KAAK,GAAG;AAAA,IAClB;AACA,WAAO,IAAI,MAAM;AAAA,MACf,UAAU;AAAA,MACV,WAAW;AAAA,MACX,gBAAgB,4BAA4B,OAAO,KAAK,CAAC;AAAA,MACzD,cAAc,iBAAiB,QAAQ,QAAQ;AAAA,IACjD,CAAC;AAAA,EACH;AACF;AAEO,aAAM,eAAe,OAC1B,KACA,YAIoB;AACpB,MAAI,QAAQ,MAAM,OAAO;AACvB,WAAO,MAAM;AAAA,MACX,SAAS,QAAQ;AAAA,MACjB,GAAI,QAAQ,YAAY,SAAY,EAAE,SAAS,QAAQ,QAAQ,IAAI,CAAC;AAAA,IACtE,CAAC,EAAE,MAAM,kBAAkB,GAAG,CAAC;AAAA,EACjC,OAAO;AACL,WAAO,IAAI,MAAM;AAAA,MACf,UAAU;AAAA,MACV,WAAW;AAAA,MACX,gBAAgB,0DAA0D,QAAQ,OAAO;AAAA,IAC3F,CAAC;AAAA,EACH;AACF;AAEO,aAAM,gBAAgB,OAC3B,KACA,YAOe;AACf,MAAI,QAAQ,MAAM,OAAO;AACvB,WAAO,OAAU;AAAA,MACf,SAAS,QAAQ,WAAW,QAAQ,UAAU;AAAA,MAC9C,SAAS,QAAQ;AAAA,MACjB,GAAI,QAAQ,YAAY,SAAY,EAAE,SAAS,QAAQ,QAAQ,IAAI,CAAC;AAAA,MACpE,GAAI,QAAQ,WAAW,SACnB,EAAE,OAAO,EAAE,QAAQ,QAAQ,OAAO,EAAE,IACpC,CAAC;AAAA,IACP,CAAC,EAAE,MAAM,kBAAkB,GAAG,CAAC;AAAA,EACjC,OAAO;AACL,WAAO,IAAI,MAAM;AAAA,MACf,UAAU;AAAA,MACV,WAAW;AAAA,MACX,gBAAgB,0DAA0D,QAAQ,OAAO;AAAA,IAC3F,CAAC;AAAA,EACH;AACF;AAEO,aAAM,eAAe,OAC1B,KACA,YAKe;AACf,MAAI,QAAQ,MAAM,OAAO;AACvB,WAAO,OAAU;AAAA,MACf,SAAS,QAAQ;AAAA,MACjB,GAAI,QAAQ,YAAY,SAAY,EAAE,SAAS,QAAQ,QAAQ,IAAI,CAAC;AAAA,MACpE,QAAQ,CAACA,WAA8B;AACrC,YAAI,CAACA,OAAO,QAAO,QAAQ;AAC3B,cAAM,OAAOA,OAAM,YAAY;AAC/B,eAAO,QAAQ,QAAQ;AAAA,UAAO,CAAC,MAC7B,EAAE,KAAK,YAAY,EAAE,SAAS,IAAI;AAAA,QACpC;AAAA,MACF;AAAA,IACF,CAAC,EAAE,MAAM,kBAAkB,GAAG,CAAC;AAAA,EACjC,OAAO;AACL,WAAO,IAAI,MAAM;AAAA,MACf,UAAU;AAAA,MACV,WAAW;AAAA,MACX,gBAAgB,0DAA0D,QAAQ,OAAO;AAAA,IAC3F,CAAC;AAAA,EACH;AACF;AAEO,aAAM,cAAc,OACzB,KACA,YAMqB;AACrB,MAAI,QAAQ,MAAM,OAAO;AACvB,WAAO,QAAQ;AAAA,MACb,SAAS,QAAQ;AAAA,MACjB,GAAI,QAAQ,YAAY,SAAY,EAAE,SAAS,QAAQ,QAAQ,IAAI,CAAC;AAAA,MACpE,GAAI,QAAQ,WAAW,SACnB,EAAE,OAAO,EAAE,QAAQ,QAAQ,OAAO,EAAE,IACpC,CAAC;AAAA,IACP,CAAC,EAAE,MAAM,kBAAkB,GAAG,CAAC;AAAA,EACjC,OAAO;AACL,cAAU,QAAQ,OAAO;AACzB,WAAO,IAAI,MAAM;AAAA,MACf,UAAU;AAAA,MACV,WAAW;AAAA,MACX,gBACE,QAAQ,uBACR,0DAA0D,QAAQ,OAAO;AAAA,IAC7E,CAAC;AAAA,EACH;AACF;",
  "names": ["input"]
}
